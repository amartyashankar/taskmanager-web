{"ast":null,"code":"var _jsxFileName = \"/Users/amartyashankar/final copy 2/Projects/notedly/web/src/pages/signin.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useMutation, useApolloClient } from '@apollo/client';\nimport { useNavigate } from 'react-router-dom';\nimport { IS_LOGGED_IN } from '../gql/query';\nimport UserForm from '../components/UserForm';\nimport { SIGNIN_USER } from '../gql/mutation';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SignIn = () => {\n  _s();\n  useEffect(() => {\n    // Update the document title\n    document.title = 'Sign In — Notedly';\n  }, []);\n  const client = useApolloClient();\n  const navigate = useNavigate();\n  const [signIn, {\n    loading,\n    error\n  }] = useMutation(SIGNIN_USER, {\n    onCompleted: data => {\n      // Store the token\n      localStorage.setItem('token', data.signIn);\n\n      // Update the local cache with the new logged-in status\n      client.cache.writeQuery({\n        query: IS_LOGGED_IN,\n        data: {\n          isLoggedIn: true\n        }\n      });\n\n      // Redirect the user to the homepage\n      navigate('/');\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(UserForm, {\n      action: signIn,\n      formType: \"signIn\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Error signing in!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n};\n_s(SignIn, \"lFI+ckDNQSwVxq5SRwnwtwMKGws=\", false, function () {\n  return [useApolloClient, useNavigate, useMutation];\n});\n_c = SignIn;\nexport default SignIn;\nvar _c;\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"names":["React","useEffect","useMutation","useApolloClient","useNavigate","IS_LOGGED_IN","UserForm","SIGNIN_USER","jsxDEV","_jsxDEV","SignIn","_s","document","title","client","navigate","signIn","loading","error","onCompleted","data","localStorage","setItem","cache","writeQuery","query","isLoggedIn","Fragment","children","action","formType","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/amartyashankar/final copy 2/Projects/notedly/web/src/pages/signin.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useMutation, useApolloClient } from '@apollo/client';\nimport { useNavigate } from 'react-router-dom';\nimport { IS_LOGGED_IN } from '../gql/query';\nimport UserForm from '../components/UserForm';\nimport { SIGNIN_USER } from '../gql/mutation';\n\nconst SignIn = () => {\n  useEffect(() => {\n    // Update the document title\n    document.title = 'Sign In — Notedly';\n  }, []);\n\n  const client = useApolloClient();\n  const navigate = useNavigate();\n\n  const [signIn, { loading, error }] = useMutation(SIGNIN_USER, {\n    onCompleted: data => {\n      // Store the token\n      localStorage.setItem('token', data.signIn);\n\n      // Update the local cache with the new logged-in status\n      client.cache.writeQuery({\n        query: IS_LOGGED_IN,\n        data: { isLoggedIn: true },\n      });\n\n      // Redirect the user to the homepage\n      navigate('/');\n    },\n  });\n\n  return (\n    <React.Fragment>\n      <UserForm action={signIn} formType=\"signIn\" />\n      {/* Display a loading message if the data is loading */}\n      {loading && <p>Loading...</p>}\n      {/* Display an error message if there is an error */}\n      {error && <p>Error signing in!</p>}\n    </React.Fragment>\n  );\n};\n\nexport default SignIn;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,WAAW,EAAEC,eAAe,QAAQ,gBAAgB;AAC7D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,YAAY,QAAQ,cAAc;AAC3C,OAAOC,QAAQ,MAAM,wBAAwB;AAC7C,SAASC,WAAW,QAAQ,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9C,MAAMC,MAAM,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnBV,SAAS,CAAC,MAAM;IACd;IACAW,QAAQ,CAACC,KAAK,GAAG,mBAAmB;EACtC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,MAAM,GAAGX,eAAe,CAAC,CAAC;EAChC,MAAMY,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAE9B,MAAM,CAACY,MAAM,EAAE;IAAEC,OAAO;IAAEC;EAAM,CAAC,CAAC,GAAGhB,WAAW,CAACK,WAAW,EAAE;IAC5DY,WAAW,EAAEC,IAAI,IAAI;MACnB;MACAC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,IAAI,CAACJ,MAAM,CAAC;;MAE1C;MACAF,MAAM,CAACS,KAAK,CAACC,UAAU,CAAC;QACtBC,KAAK,EAAEpB,YAAY;QACnBe,IAAI,EAAE;UAAEM,UAAU,EAAE;QAAK;MAC3B,CAAC,CAAC;;MAEF;MACAX,QAAQ,CAAC,GAAG,CAAC;IACf;EACF,CAAC,CAAC;EAEF,oBACEN,OAAA,CAACT,KAAK,CAAC2B,QAAQ;IAAAC,QAAA,gBACbnB,OAAA,CAACH,QAAQ;MAACuB,MAAM,EAAEb,MAAO;MAACc,QAAQ,EAAC;IAAQ;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EAE7CjB,OAAO,iBAAIR,OAAA;MAAAmB,QAAA,EAAG;IAAU;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,EAE5BhB,KAAK,iBAAIT,OAAA;MAAAmB,QAAA,EAAG;IAAiB;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACpB,CAAC;AAErB,CAAC;AAACvB,EAAA,CAlCID,MAAM;EAAA,QAMKP,eAAe,EACbC,WAAW,EAESF,WAAW;AAAA;AAAAiC,EAAA,GAT5CzB,MAAM;AAoCZ,eAAeA,MAAM;AAAC,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}